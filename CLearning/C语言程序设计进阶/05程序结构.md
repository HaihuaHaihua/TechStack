## 程序结构

### 5.1全局变量

* 全局变量具有全局的作用域和生存周期
  * 全局变量的使用与函数无关
  * 局部变量的作用域和生存期是一致的
* 全局变量的初始化，未初始化的全局变量会被编译器自动初始化为0或者NULL
* 全局变量与局部变量同名时，全局变量会被隐藏

**静态本地变量**

* 当函数离开时，静态本地变量将继续存在并保持原值；对静态本地变量的初始化只会在第一次使用时被初始化
* 静态本地变量是一种特殊的全局变量，具有全局的生存周期但是只有本地的作用域

**函数的返回结果是指针**

* 本地变量的存储空间是共享的，不要返回本地变量的地址
* 不要使用全局变量传参和传结果
* 在并行程序中，尽量不使用全局变量

### 5.2编译预处理

* `#` 开头的编译预处理指令不是C语言语句

* `#define`定义宏：`#define PI 3.1415926`在编译预处理的过程中，会对宏进行完全的文本替换

  ```c
  #include<stdio.h>
  
  #define PI 3.1415926
  #define FORMAT "%f\n"
  #define PI2 PI*2 3
  
  int main(int argc,char const *argv[])
  {
      printf(FORMAT,PI2*3.0);
      return 0;
  }
  ```

* 带参数的宏定义：`#define cube(x) ((x)*(x)*(x))`,带参数的宏定义整个的值和内部参数都要带括号才能够在文本替换的过程中不会出现语义上的改变

  ```c
  #include<stdio.h>
  
  #define cube(x) ((x)*(x)*(x))
  
  int main(int argc,char const *argv[])
  {
      printf("%d\n",cube(5));
      return 0;
  }
  ```

### 5.3大程序结构

* 多个源代码文件的整合，通过建立项目来建立文件之间的链接
* 头文件：存放函数原型，调用函数的文件`#include`头文件，确定函数调用文件与函数实现文件间参数类型的一致
* `#include`编译预处理指令：将`include`的文件内容直接插入到引用位置
* 加`static`的函数是不对外公开的，只能在文件内使用

**声明与定义**

* `extern int i;`是变量的声明，声明是不产生代码的东西

* `int i;`是变量的定义，是产生代码的东西

* 一般情况下只将声明放在头文件中，否则在不同的`#include`头文件的过程中，会导致重复定义错误，可以使用`#ifndef #define #endif`来避免头文件中重复引用情况

  ```c
  //标准头文件结构
  #ifndef __LIST_HEAD__
  #define __LIST_HEAD__
  
  #endif
  ```

  